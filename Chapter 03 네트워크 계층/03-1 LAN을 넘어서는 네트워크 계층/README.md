# 03-1 LAN을 넘어서는 네트워크 계층

## 📌 학습 목표
- 해당 챕터의 개념 정리

## ❓ 확인 문제
### Q1. 다음중 네트워크 계층이 데이터 링크 계층의 한계를 극복하기 위해 도입된 이유로 옳지 않은 것은 무엇인가요?

1️. 네트워크 계층은 서로 다른 네트워크 간의 데이터 전송을 가능하게 한다.

2️. 네트워크 계층은 MAC 주소를 사용하여 네트워크 간 데이터를 전송한다.

3️. 네트워크 계층은 데이터 패킷을 목적지까지 최적의 경로로 전달하는 역할을 한다.

4️. 네트워크 계층에서 사용하는 주요 프로토콜에는 IP(Internet Protocol)가 포함된다.

<details>
<summary>정답</summary>

- **2️. 네트워크 계층은 MAC 주소를 사용하여 네트워크 간 데이터를 전송한다. X**   
  - MAC 주소는 데이터 링크 계층에서 사용되며, 네트워크 계층에서는 IP 주소를 기반으로 데이터 전송이 이루어집니다.

**[해설]**

- **1. 네트워크 계층은 서로 다른 네트워크 간의 데이터 전송을 가능하게 한다.**   
  - 데이터 링크 계층은 같은 네트워크 내에서만 데이터 전송이 가능하지만, 네트워크 계층을 통해 LAN을 넘어 WAN과 같은 광범위한 네트워크 간 데이터 전송이 가능합니다.

- **	3. 네트워크 계층은 데이터 패킷을 목적지까지 최적의 경로로 전달하는 역할을 한다. **   
  - 네트워크 계층은 라우팅을 담당하며, 데이터를 목적지까지 전달할 최적의 경로를 결정합니다.
  
- **4. 네트워크 계층에서 사용하는 주요 프로토콜에는 IP(Internet Protocol)가 포함된다.**
  - IP(IPv4, IPv6)는 네트워크 계층에서 데이터 패킷의 주소를 지정하고, 전송을 관리하는 중요한 프로토콜입니다.
---
</details>


### Q2. 다음 중 IPv4 패킷의 필드와 설명이 올바르게 짝지어 진 것이 아닌 것은?

1️. 단편화 오프셋 - 패킷이 단편화 되기 전 패킷의 초기에서 몇 번째로 떨어진 패킷인지를 나타낸다.

2️. TTL - 패킷의 수명을 의미하며, 하나의 라우터를 거칠 때 마다 2씩 감소한다.

3️. 프로토콜 - 상위 계층의 프로토콜이 무엇인지를 나타내는 필드이다.

4️. 식별자 - 패킷의 할당된 번호로, 어떤 메세지에서부터 쪼개졌는지를 인식하기 위해 사용한다.

<details>
<summary>정답</summary>

- **2️. TTL - 패킷의 수명을 의미하며, 하나의 라우터를 거칠 때 마다 2씩 감소한다. X**   

**[해설]**
하나의 라우터를 거칠 때 마다 1씩 감소하며, 0이되면 해당 패킷은 사라지게 된다.
</details>

### Q3. 네트워크에서 기본적으로 사용되는 주소는 IP 주소이지만, 패킷을 올바르게 송신하려면 항상 상태 호스트의 MAC 주소까지 알아야 한다. (O/X)

<details>
<summary>정답</summary>

❌ (X)

같은 네트워크(즉, 같은 서브넷) 내에서는 ARP(Address Resolution Protocol)를 사용해서 목적지 호스트의 MAC 주소를 쉽게 알아낼 수 있지만, 다른 네트워크(다른 서브넷)에 있는 호스트의 MAC 주소는 직접 알 수 없다.  

✔ **같은 네트워크**에서는 ARP를 사용해서 직접 MAC 주소를 찾아 패킷을 전송한다.  
✔ **다른 네트워크**일 경우, 목적지 MAC 주소를 알 수 없기 때문에 **게이트웨이(라우터)의 MAC 주소를 사용**해서 먼저 보내고, 라우터가 최종 목적지까지 전달한다. 

---

</details>

### Q4. 호스트 A가 네트워크에서 호스트 B의 MAC 주소를 알아내기 위해 ARP를 사용할 때, 올바른 동작 과정을 순서대로 나열한 것은?

#### 1️⃣ ARP 요청 브로드캐스트 → ARP 응답 → ARP 테이블 갱신

#### 2️⃣ ARP 요청 → ARP 테이블 갱신 → ARP 응답

#### 3️⃣ ARP 요청 멀티캐스트 → ARP 응답 → ARP 테이블 갱신

#### 4️⃣ ARP 요청 → DHCP 응답 → ARP 테이블 갱신

<details>
<summary>정답</summary>

- **1️⃣ ARP 요청 브로드캐스트 → ARP 응답 → ARP 테이블 갱신**  

**[해설]**

- **ARP 요청 (브로드캐스트): 호스트 A는 네트워크 상의 모든 장치에게 "이 IP 주소를 가진 장치의 MAC 주소를 알려줘!"라고 브로드캐스트(모든 호스트에게 전송) 한다.**
- **ARP 응답 (유니캐스트): 해당 IP를 가진 호스트 B는 자신의 MAC 주소를 응답(유니캐스트, 요청을 보낸 호스트에게만 전송) 한다.**
- **ARP 테이블 갱신: 호스트 A는 응답받은 MAC 주소를 ARP 테이블에 저장하여 이후에는 ARP 요청 없이 바로 사용할 수 있도록 한다.**

</details>

### Q5. IPv6의 기본 헤더는 IPv4에 비해 간소화되어있다. 그러나 IPv6에서도 충분히 패킷의 단편화를 비롯한 암호화와 인증, 패킷 검사 등을 설정할 수 있다. 기본 헤더의 간소화에도 불구하고 이러한 작업이 가능하도록 만들어주는 IPv6의 필드는 무엇인가?

#### 1️⃣ 홉 제한

#### 2️⃣ 다음 헤더

#### 3️⃣ 수신지 IP 주소

#### 4️⃣ TTL

<details>
<summary>정답</summary>

#### 2️⃣ 다음 헤더
- IPv6는 추가적인 헤더 정보가 필요할 경우에 기본 헤더와 더불어 확장 헤더를 다음 헤더 필드에 추가 헤더로 가질 수 있습니다.
- 확장 헤더의 종류는 단편화, 라우팅 관련 정보 운반, 패킷 검사 등 다양하기 때문에 상황에 맞는 다양한 정보를 운반할 수 있으며, 이로 인해 IPv4에 비해 간소화된 기본 헤더를 가질 수 있습니다.

#### 1️⃣ 홉 제한 : IPv4 패킷의 TTL 필드와 비슷하게 패킷의 수명을 나타내는 필드입니다.

#### 3️⃣ 수신지 IP 주소 : 전송되는 패킷이 도달할 수신지의 IPv6 주소를 나타내는 필드입니다.

#### 4️⃣ TTL : IPv4 패킷에서 사용하는 패킷의 수명을 나타내는 필드입니다.

---

</details>

### **Q6. 다음 중 IP 단편화를 피할 필요가 없는 경우로 올바른 것은?**  

#### **1️⃣ 온라인 화상 회의를 진행하는 경우**  
#### **2️⃣ 실시간 온라인 게임을 플레이하는 경우**  
#### **3️⃣ 대용량 파일을 이메일에 첨부하여 전송하는 경우**  
#### **4️⃣ 실시간 스트리밍 영상을 재생하는 경우**  

<details>  
<summary>정답</summary>  

- **3️⃣ 대용량 파일을 이메일에 첨부하여 전송하는 경우**  
 
- 이메일이나 파일 전송과 같은 신뢰성이 중요한 서비스는 단편화가 발생하더라도 재전송이 가능하므로 문제가 크지 않다. 
- 단편화된 패킷이 손실될 경우 전체 데이터의 재전송이 필요하며, **라우팅 성능 저하**와 **보안 문제를 유발**할 수 있다.

---

- **1️⃣ 온라인 화상 회의를 진행하는 경우**  
  - 화상 회의는 **UDP(사용자 데이터그램 프로토콜)**을 기반으로 한다.  
  - UDP는 속도를 우선시하며, **패킷이 손실되면 재전송이 어렵다.**  
  - 단편화된 패킷이 손실되면 **화질 저하, 음성 끊김, 네트워크 지연 등의 문제가 발생**할 수 있다.

- **2️⃣ 실시간 온라인 게임을 플레이하는 경우**  
  - 실시간 온라인 게임은 빠른 반응 속도가 중요하며, 주로 **UDP 기반**으로 동작한다.  
  - 단편화된 패킷이 손실되면 캐릭터 움직임이 끊기거나 **딜레이(핑 증가)가 발생**할 수 있다.    

- **4️⃣ 실시간 스트리밍 영상을 재생하는 경우**  
  - 유튜브, 넷플릭스 등의 실시간 스트리밍 서비스는 **UDP 또는 TCP를 혼합 사용**한다.  
  - 패킷 손실이 발생하면 화면이 끊기거나 화질이 저하될 수 있다.  
</details>

### Q7. IPv4 와 IPv6의 단편화 작업의 차이가 아닌 것은?

#### 1. IPv4의 경우 한 홉마다 체크섬을 다시 계산해야 한다.

#### 2. IPv6의 경우 IPv4와는 달리 체크섬이 없다.

#### 3. IPv6과 IPv4 모두 라우터와 발신지에서 IP 단편화가 일어난다.

#### 4. IPv6의 단편화 오프셋, M플래그, 식별자는 각각 단편화 오프셋, MF, 식별자 필드에 대응한다

<details>
<summary>정답</summary>

#### 3. IPv6과 IPv4 모두 라우터와 발신지에서 IP 단편화가 일어난다.

---

IPv6은 IPv4와는 달리 발신지에서만 IP 단편화가 진행된다.
</details>

### Q8. ARP 요청은 어떤 방식으로 네트워크에 전송되는가?

#### 1️⃣ 유니캐스트(Unicast)
#### 2️⃣ 브로드캐스트(Broadcast)
#### 3️⃣ 멀티캐스트(Multicast)
#### 4️⃣ 애니캐스트(Anycast)

<details>
<summary>정답</summary>

#### 2️⃣ 브로드캐스트(Broadcast) : ARP 요청 자신을 제외한 네트워크 내 모든 호스트에게 메시지 보냄.
- 네트워크 통신 방식
1. 유니캐스트 : 1 대 1 통신, ex) 웹 브라우징
2. 브로드캐스트 : 1대 다수 통신, ex) ARP 요청
3. 멀티캐스트 : 1 대 특정 그룹 통신, ex) IPTV
4. 애니캐스트 : 1 대 가장 가까운 1 통신(여러 수신자 중 가장 가까운 수신자에게만 데이터 전송), ex)DNS 서버

---

</details>

### Q9. 택배가 다른 도시로 이동할 때, 먼저 중앙 물류센터(라우터)를 거쳐야 한다. 이때 중앙 물류센터에서 택배를 어디로 보내야 할지 결정하는 정보는?

#### 1️⃣ MAC 주소
#### 2️⃣ IP 주소

<details>
<summary>정답</summary>

#### 2️⃣ IP주소
- 물류센터는 목적지 도시를 보고 방향을 결정


---

</details>

### Q10. IPv4 헤더의 플래그 중 DF(Don't Fragment)와 MF(More Fragment) 에 대해 설명하시오.

<details>
<summary>정답</summary>

 - IPV4 헤더에는 세 개의 플래그가 있으며, 그 중 DF(Don't Fragment)와 MF(More Fragment)는 패킷의 단편화와 관련이 있음.
- **DF (Don't Fragment, 단편화 금지)**
    - 값이 `1`이면 패킷을 단편화할 수 없다.
    - 만약 패킷이 MTU(Maximum Transmission Unit)보다 크다면, 패킷이 전송되지 않고 오류 메시지가 반환된다(ICMP Fragmentation Needed).
    - 값이 `0`이면 패킷을 단편화할 수 있다.
- **MF (More Fragments, 추가 단편 존재)**
    - 값이 `1`이면 해당 패킷이 더 큰 데이터의 일부이며, 이후에 추가적인 단편이 전송될 것임을 의미한다.
    - 값이 `0`이면 해당 패킷이 마지막 단편이거나 단편화되지 않은 패킷이다.
- 이 두 플래그는 네트워크에서 패킷이 단편화될지를 결정하는 중요한 역할을 함.

</details>


## 📝 사용법  
### 이렇게 활용해 보세요! ✨  
1. ❓ 확인 문제 아래에 본인이 만든 질문을 추가하세요.  
2. 설명이 길어질 경우, 따로 마크다운 파일을 만들고 링크를 함께 추가해 주세요! 🔗  

### 🔗 링크 추가 방법  
1. 먼저 질문을 작성합니다.  
2. 링크를 적용할 문장을 마우스로 선택합니다.  
3. URL을 붙여넣습니다.  
4. 마크다운 형식으로 `[내용](링크)` 형태로 정리됩니다.  
